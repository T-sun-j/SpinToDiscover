(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{5411:function(e,s,t){Promise.resolve().then(t.bind(t,1782))},1782:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var n=t(7437),i=t(4196),a=t(1839),l=t(759),r=t(2690),c=t(6281),o=t(3276),d=t(2451),h=t(1817),x=t(9322);let u=(0,t(9205).Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var m=t(3145),f=t(9376),j=t(2265),p=t(7471),b=t(6023),y=t(9116),N=t(8685);function v(){let{t:e}=(0,l.Z)(),s=(0,f.useRouter)(),{authInfo:t}=(0,c.a)(),[v,g]=(0,j.useState)([]),w=(0,j.useRef)(!1),{data:k,loading:I,error:E,execute:Z,userParams:_}=(0,p.h)(async e=>await (0,b.NG)({userId:e.userId,token:e.token,page:N.ZX.DEFAULT_PAGE,limit:N.ZX.DEFAULT_LIMIT}),null);(0,j.useEffect)(()=>{_&&_.userId&&_.token&&!w.current&&(w.current=!0,Z())},[null==_?void 0:_.userId,null==_?void 0:_.token,Z]),(0,j.useEffect)(()=>{k&&k.success?(null==k?void 0:k.data)?g(null==k?void 0:k.data):g([]):k&&!k.success&&g([])},[k]);let F=e=>{(null==t?void 0:t.userId)&&(null==t?void 0:t.token)?s.push("/square/".concat(e,"?userId=").concat(t.userId,"&token=").concat(t.token)):s.push("/square/".concat(e))},C=s=>{let{item:t}=s;return(0,n.jsxs)("div",{className:"mb-6 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>F(t.id),children:[(0,n.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:t.images.slice(0,3).map((e,s)=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(m.default,{src:(0,y.nJ)(e)||"/img/default-image.png",alt:"history-".concat(s+1),width:112,height:112,className:"w-full h-28 object-cover rounded-md",priority:0===s}),0===s&&t.video&&(0,n.jsx)("div",{className:"absolute bottom-2 right-2 w-6 h-6 rounded-full bg-[#11295b]/80 flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-3 h-3 text-white"})})]},s))}),(0,n.jsx)("h3",{className:"text-[18px] font-semibold text-[#11295b] font-poppins mb-2",children:t.title}),(0,n.jsx)("p",{className:"text-sm leading-6 text-[#11295b]/80 font-nunito mb-2",children:t.description}),(0,n.jsxs)("div",{className:"flex justify-between text-xs text-[#11295b]/60",children:[(0,n.jsx)("span",{className:"font-nunito",children:t.location}),(0,n.jsxs)("span",{className:"font-nunito",children:[e("history.viewedOn")," ",new Date(t.updatedAt).toLocaleDateString()]})]})]})};return(0,n.jsx)(r.a,{children:(0,n.jsxs)("main",{className:"flex min-h-dvh flex-col bg-white",children:[(0,n.jsx)(i.h,{showSearch:!0,showUser:!0}),(0,n.jsxs)("div",{className:"flex justify-between items-center px-6 py-2 z-100",children:[(0,n.jsx)("h1",{className:"text-xl font-poppins text-[#0F1728] font-semibold",children:e("personalCenter.menu.history")}),(0,n.jsx)("button",{"aria-label":e("history.back"),onClick:()=>s.back(),className:"text-[#0F1728] hover:text-[#0F1728]",children:(0,n.jsx)(d.Z,{className:"w-7 h-7 z-10"})})]}),(0,n.jsxs)("section",{className:"px-6 pb-6",children:[I&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,n.jsx)(h.Z,{className:"w-5 h-5 animate-spin text-[#11295b]"}),(0,n.jsx)("span",{className:"ml-2 text-[#11295b] font-nunito",children:e("history.loading")})]}),E&&v.length>0&&(0,n.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,n.jsx)(x.Z,{className:"w-5 h-5 text-red-500"}),(0,n.jsx)("span",{className:"ml-2 text-red-500 font-nunito",children:e("history.error")})]}),!I&&0===v.length&&(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,n.jsx)(u,{className:"w-8 h-8 text-gray-400"})}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-[#11295b] font-nunito mb-2",children:e("history.noHistory")}),(0,n.jsx)("p",{className:"text-[#11295b]/60 font-inter text-center",children:e("history.noHistoryDescription")})]}),!I&&!E&&v.length>0&&(0,n.jsx)(n.Fragment,{children:v.map((e,s)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(C,{item:e}),s<v.length-1&&(0,n.jsx)("div",{className:"border-t border-gray-200 my-4"})]},e.id))})]}),(0,n.jsx)(a.$,{})]})})}}},function(e){e.O(0,[604,51,624,673,971,117,744],function(){return e(e.s=5411)}),_N_E=e.O()}]);