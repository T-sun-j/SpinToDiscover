(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{9357:function(e,t,n){Promise.resolve().then(n.bind(n,7057))},7057:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var a=n(7437),s=n(2869);let i=(0,n(9205).Z)("file-x",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);var r=n(3774),l=n(1178),o=n(8997),c=n(4970),d=n(759),u=n(6281),x=n(4196),m=n(1839),h=n(2265),f=n(9376),g=n(6023),p=n(9116),v=n(8783),y=n(9441),j=n(4512),b=n(3145);function w(){let{t:e}=(0,d.Z)(),{authInfo:t,isAuthenticated:n}=(0,u.a)(),w=(0,f.useRouter)(),k=(0,f.useSearchParams)(),[N,C]=(0,h.useState)("recommend"),[I,L]=(0,h.useState)([]),[q,F]=(0,h.useState)(!1),[Z,S]=(0,h.useState)(""),[E,z]=(0,h.useState)(""),[A,M]=(0,h.useState)(""),[T,P]=(0,h.useState)(!1),[_,B]=(0,h.useState)(null),[R,U]=(0,h.useState)({}),[D,O]=(0,h.useState)(!1),[W,H]=(0,h.useState)(null),[V,$]=(0,h.useState)(!1),[G,K]=(0,h.useState)(null),[Q,X]=(0,h.useState)([]),[J,Y]=(0,h.useState)(0),ee=(0,h.useCallback)(async()=>{P(!0);try{let e=await (0,j.gI)();if("denied"===e)return console.warn("用户拒绝了地理位置权限"),z(""),"";let t=await (0,j.g_)();return z(t),t}catch(e){return console.warn("获取地理位置失败:",e),z(""),""}finally{P(!1)}},[]),et=(0,h.useCallback)(async(n,a)=>{F(!0),S("");try{let s=a||N,i="";i=n||("nearby"===s?E||"":A||"");let r="recommend"!==s||(null==t?void 0:t.userId)&&(null==t?void 0:t.token),l=await (0,g.SX)({userId:r&&(null==t?void 0:t.userId)||"",token:r&&(null==t?void 0:t.token)||"",location:i,tab:s,page:1,limit:999});if(l.success&&l.data){let e=l.data.posts||[];L(e),B(l.data.pagination||null);let t={};e.forEach(e=>{t[e.id]={isLove:!0===e.isLove||1===e.isLove,isCollect:!0===e.isCollect||1===e.isCollect,likes:e.likes||0,bookmarks:e.collects||0,isInteracting:!1}}),U(t)}else S(e("square.loadDetailFailed"))}catch(t){S(e("square.loadDetailError"))}finally{F(!1)}},[t,E,A,N,w,e]);(0,h.useEffect)(()=>{let e=k.get("tab"),t=k.get("location");e&&C(e),t?("nearby"===e?z(t):M(t),et(t)):et()},[k]);let en=e=>{(null==t?void 0:t.userId)&&(null==t?void 0:t.token)?w.push("/square/".concat(e,"?userId=").concat(t.userId,"&token=").concat(t.token)):w.push("/square/".concat(e))},ea=async(a,s)=>{if(s.stopPropagation(),!(null==t?void 0:t.userId)||!(null==t?void 0:t.token)||!n){w.push("/login");return}let i=R[a];if(null==i||!i.isInteracting){U(e=>({...e,[a]:{...e[a],isInteracting:!0}}));try{(await (0,g.v1)({userId:t.userId,token:t.token,productId:a,isLove:(null==i?void 0:i.isLove)?0:1})).success?U(e=>{var t,n,s;return{...e,[a]:{...e[a],isLove:!(null===(t=e[a])||void 0===t?void 0:t.isLove),likes:((null===(n=e[a])||void 0===n?void 0:n.likes)||0)+((null===(s=e[a])||void 0===s?void 0:s.isLove)?-1:1),isInteracting:!1}}}):alert(e("square.operationFailed"))}catch(t){console.error("点赞失败:",t),alert(e("square.operationFailed"))}finally{U(e=>({...e,[a]:{...e[a],isInteracting:!1}}))}}},es=async(a,s)=>{if(s.stopPropagation(),!(null==t?void 0:t.userId)||!(null==t?void 0:t.token)||!n){w.push("/login");return}let i=R[a];if(null==i||!i.isInteracting){U(e=>({...e,[a]:{...e[a],isInteracting:!0}}));try{(await (0,g.gQ)({userId:t.userId,token:t.token,productId:a,isCollect:(null==i?void 0:i.isCollect)?0:1})).success?U(e=>{var t,n,s;return{...e,[a]:{...e[a],isCollect:!(null===(t=e[a])||void 0===t?void 0:t.isCollect),bookmarks:((null===(n=e[a])||void 0===n?void 0:n.bookmarks)||0)+((null===(s=e[a])||void 0===s?void 0:s.isCollect)?-1:1),isInteracting:!1}}}):alert(e("square.operationFailed"))}catch(t){console.error("收藏失败:",t),alert(e("square.operationFailed"))}finally{U(e=>({...e,[a]:{...e[a],isInteracting:!1}}))}}},ei=e=>{H(e),O(!0)},er=()=>{O(!1),H(null)},el=(e,t,n)=>{X(t),Y(n),K(e),$(!0)},eo=()=>{$(!1),K(null),X([]),Y(0)},ec=()=>{if(J>0){let e=J-1;Y(e),K(Q[e])}},ed=()=>{if(J<Q.length-1){let e=J+1;Y(e),K(Q[e])}},eu=async(n,a)=>{if(a.stopPropagation(),(null==t?void 0:t.userId)&&(null==t?void 0:t.token))try{await (0,g._Z)({userId:t.userId,token:t.token,productId:n.id}),L(e=>e.map(e=>e.id===n.id?{...e,shares:(e.shares||0)+1}:e))}catch(e){console.error("分享接口调用失败:",e)}try{navigator.share?await navigator.share({title:n.title||"Untitled",text:n.description||"",url:"".concat(window.location.origin,"/square/").concat(n.id)}):(await navigator.clipboard.writeText("".concat(window.location.origin,"/square/").concat(n.id)),alert(e("square.linkCopied")))}catch(e){"AbortError"!==e.name&&console.error("分享失败:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("svg",{className:"absolute w-0 h-0",children:(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"bookmark-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#eab308"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#f97316"})]}),(0,a.jsxs)("linearGradient",{id:"heart-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#FD9507"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#CE14B0"})]})]})}),(0,a.jsxs)("main",{className:" flex min-h-[100vh] flex-col",children:[(0,a.jsx)(x.h,{showSearch:!0,showUser:!0,userLink:"/personal-center"}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-2 pt-3 pb-2  z-100",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{let e="recommend";C(e),et("",e)},className:"text-sm  px-3 py-1 rounded-full transition-all font-poppins ".concat("recommend"===N?"w-36 h-7 bg-gradient-to-r from-[#FD9507] to-[#CE14B0] text-white shadow-sm font-semibold":"font-semibold text-[#0F1728] hover:text-gray-800"),children:e("square.recommend")}),(0,a.jsx)("button",{onClick:()=>{if(!(null==t?void 0:t.userId)||!(null==t?void 0:t.token)){w.push("/login");return}let e="following";C(e),et("",e)},className:"text-sm  px-3 py-1 rounded-full transition-all font-poppins ".concat("following"===N?"w-36 h-7 bg-gradient-to-r from-[#FD9507] to-[#CE14B0] text-white shadow-sm font-semibold":"font-semibold text-[#0F1728] hover:text-gray-800"),children:e("square.following")}),(0,a.jsx)("button",{onClick:async()=>{if(!(null==t?void 0:t.userId)||!(null==t?void 0:t.token)){w.push("/login");return}let e="nearby";C(e),et(await ee(),e)},className:"text-sm font-medium px-3 py-1 rounded-full transition-all font-poppins ".concat("nearby"===N?"w-36 h-7 bg-gradient-to-r from-[#FD9507] to-[#CE14B0] text-white shadow-sm font-semibold":"font-semibold text-[#0F1728] hover:text-gray-800"),children:e("square.nearby")})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(s.z,{variant:"ghost",size:"sm",onClick:()=>w.push("/region-select?from=square&filterLocation=".concat(A)),className:"text-gray-600 hover:text-gray-800 py-1",children:(0,a.jsx)(b.default,{src:"/img/Filter.png",alt:"Filter",width:16,height:16,className:"w-6 h-6"})})})]}),(q||T)&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(v.TK,{size:"lg",text:T?e("square.gettingLocation"):e("square.loading")})}),Z&&!q&&!T&&(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)(v.Te,{error:Z,onRetry:()=>n&&et(E)})}),!q&&!Z&&!T&&0===I.length&&(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center px-4 py-12",children:[(0,a.jsx)(i,{className:"h-16 w-16 text-gray-300 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e("square.noContent")}),(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center max-w-sm",children:"recommend"===N?e("square.noRecommendContent"):n?e("square.noNearbyContent"):e("square.loginRequired")})]}),!q&&!Z&&!T&&I.length>0&&(0,a.jsxs)("div",{className:"flex-1 ",children:[(0,a.jsx)("div",{className:"space-y-0",children:I.map((t,s)=>{var i,d,u,x,m,h,f,g,v,j,b,w;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"bg-white px-4 pt-2 cursor-pointer hover:shadow-sm transition-shadow",onClick:()=>en(t.id),children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:"".concat(p.bl.STATIC_URL).concat(t.publisher.avatar),alt:t.publisher.nickname,className:"w-9 h-9 object-cover rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-[#0F1728] leading-9 font-nunito",children:t.publisher.nickname})]})}),(0,a.jsx)("h3",{className:" text-[#12295B] text-[17px] italic leading-[34px] font-nunito font-semibold",children:t.title}),(0,a.jsx)("p",{className:"text-sm text-[#20313B]  leading-[17px] font-inter",children:t.description}),(0,a.jsxs)("div",{className:"flex gap-2 overflow-x-auto my-2",children:[t.video&&(0,a.jsxs)("div",{className:"relative w-34 h-24 rounded flex-shrink-0 bg-gray-200 overflow-hidden cursor-pointer",onClick:e=>{e.stopPropagation(),ei("".concat(p.bl.STATIC_URL).concat(t.video))},children:[(0,a.jsx)("video",{src:"".concat(p.bl.STATIC_URL).concat(t.video),className:"w-full h-full object-cover",muted:!0,preload:"metadata",onLoadedMetadata:e=>{e.currentTarget.currentTime=.1}}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-opacity-30",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-white bg-opacity-90 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-800 ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z"})})})})]}),t.images.map((e,n)=>{let s="".concat(p.bl.STATIC_URL).concat(e),i=t.images.map(e=>"".concat(p.bl.STATIC_URL).concat(e));return(0,a.jsx)("div",{className:"relative w-36 h-24 rounded flex-shrink-0 bg-gray-100 overflow-hidden cursor-pointer",onClick:e=>{e.stopPropagation(),el(s,i,n)},children:(0,a.jsx)(y.d,{src:s,alt:"Post ".concat(t.id," image ").concat(n+1),className:"w-full h-full object-cover"})},n)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between my-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[t.updatedAt&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:t.updatedAt}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 text-[#0F1728] font-semibold"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:t.location})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,a.jsxs)("button",{onClick:e=>es(t.id,e),disabled:!n||(null===(i=R[t.id])||void 0===i?void 0:i.isInteracting),className:"flex flex-col items-center gap-0.5 transition-colors ".concat((null===(d=R[t.id])||void 0===d?void 0:d.isCollect)?"bg-gradient-to-r from-yellow-500 to-orange-500 bg-clip-text text-transparent":"text-[#0F1728] hover:text-gray-700"," ").concat(!n||(null===(u=R[t.id])||void 0===u?void 0:u.isInteracting)?"opacity-50 cursor-not-allowed":""),title:n?"":e("square.pleaseLoginFirst"),children:[(0,a.jsx)(l.Z,{className:"h-6 w-6 font-semibold",style:(null===(x=R[t.id])||void 0===x?void 0:x.isCollect)?{fill:"url(#bookmark-gradient)"}:{}}),(0,a.jsx)("span",{className:"text-xs font-nunito ".concat((null===(m=R[t.id])||void 0===m?void 0:m.isCollect)?"bg-gradient-to-r from-yellow-500 to-orange-500 bg-clip-text text-transparent":""),children:(null===(h=R[t.id])||void 0===h?void 0:h.bookmarks)||t.collects||0})]}),(0,a.jsxs)("button",{onClick:e=>ea(t.id,e),disabled:!n||(null===(f=R[t.id])||void 0===f?void 0:f.isInteracting),className:"flex flex-col items-center gap-0.5 transition-colors ".concat((null===(g=R[t.id])||void 0===g?void 0:g.isLove)?"bg-gradient-to-r from-[#FD9507] to-[#CE14B0] bg-clip-text text-transparent":"text-[#0F1728] hover:text-red-500"," ").concat(!n||(null===(v=R[t.id])||void 0===v?void 0:v.isInteracting)?"opacity-50 cursor-not-allowed":""),title:n?"":e("square.pleaseLoginFirst"),children:[(0,a.jsx)(o.Z,{className:"h-6 w-6 font-semibold",style:(null===(j=R[t.id])||void 0===j?void 0:j.isLove)?{fill:"url(#heart-gradient)"}:{}}),(0,a.jsx)("span",{className:"text-xs font-nunito ".concat((null===(b=R[t.id])||void 0===b?void 0:b.isLove)?"bg-gradient-to-r from-[#FD9507] to-[#CE14B0] bg-clip-text text-transparent":""),children:(null===(w=R[t.id])||void 0===w?void 0:w.likes)||t.likes||0})]}),(0,a.jsxs)("button",{onClick:e=>eu(t,e),className:"flex flex-col items-center gap-0.5 text-[#0F1728] hover:text-gray-700 transition-colors",children:[(0,a.jsx)(c.Z,{className:"h-6 w-6 font-semibold"}),(0,a.jsx)("span",{className:"text-xs font-nunito",children:t.shares||e("square.share")})]})]})]})]}),s<I.length-1&&(0,a.jsx)("div",{className:"mx-4 my-4",style:{borderBottom:"1px solid #e5e7eb"}})]},t.id)})}),_&&(0,a.jsx)("div",{className:"px-4 py-3 text-center text-xs text-gray-500",children:e("square.pagination").replace("{items}",_.totalItems.toString())})]}),(0,a.jsx)(m.$,{}),D&&W&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center z-200",children:(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)("button",{onClick:er,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("video",{src:W,className:"max-w-full max-h-full object-contain",controls:!0,autoPlay:!0,onEnded:er,onError:e=>{console.error("视频播放失败:",e),er()}})]})}),V&&G&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center z-200",onClick:eo,children:(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)("button",{onClick:eo,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),J>0&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),ec()},className:"absolute left-4 z-10 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),J<Q.length-1&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),ed()},className:"absolute right-4 z-10 w-10 h-10 bg-black bg-opacity-50 text-white rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,a.jsx)("div",{className:"max-w-full max-h-full flex items-center justify-center px-16",onClick:e=>e.stopPropagation(),children:(0,a.jsx)("img",{src:G,alt:"Preview",className:"max-w-full max-h-full object-contain"})}),Q.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-10 bg-black bg-opacity-50 text-white px-4 py-2 rounded-full text-sm",children:[J+1," / ",Q.length]})]})})]})]})}},1839:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var a=n(7437),s=n(759),i=n(3145);function r(e){let{transparent:t=!1}=e,{language:n,setLanguage:r}=(0,s.Z)();return(0,a.jsxs)("button",{onClick:()=>{r("en"===n?"zh":"en")},className:"flex items-center ".concat(t?"text-white":"text-[#0F1728]"," hover:opacity-80 transition-opacity"),"aria-label":"Switch to ".concat("en"===n?"Chinese":"English"),children:[(0,a.jsx)(i.default,{src:t?"/img/lang.png":"/img/lang-d.png",alt:"Language",width:24,height:24,className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-[10px] font-medium ml-1 ".concat(t?"text-white":"text-[#0F1728]"),children:"en"===n?"EN":"CN"})]})}var l=n(7648);function o(e){let{transparent:t=!1}=e,{t:n}=(0,s.Z)();return(0,a.jsx)("footer",{className:"mt-auto text-[10px] py-4 px-4 w-full font-inter ".concat(t?"text-white":"text-[#0F1728]"),children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 font-inter",children:(0,a.jsx)(r,{transparent:t})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[(0,a.jsx)(l.default,{href:"/about",className:"".concat(t?"text-white":"text-[#0F1728]"," font-inter"),children:n("footer.links.about")}),(0,a.jsx)(l.default,{href:"/privacy",className:"".concat(t?"text-white":"text-[#0F1728]"," font-inter"),children:n("footer.links.privacy")}),(0,a.jsx)("span",{className:"".concat(t?"text-white":"text-[#0F1728]"," font-inter"),children:n("footer.copyright")}),(0,a.jsx)(i.default,{src:t?"/img/logo-1.png":"/img/logo-2.png",alt:"Language",width:52,height:22,className:"h-5 w-auto"})]})]})})}},8783:function(e,t,n){"use strict";n.d(t,{TK:function(){return o},Te:function(){return c},ub:function(){return d}});var a=n(7437),s=n(2869),i=n(9322),r=n(7168),l=n(759);function o(e){let{size:t="md",text:n,className:s=""}=e,{t:i}=(0,l.Z)(),r=n||i("common.loading");return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(s),children:[(0,a.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-[#11295b] ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]," mb-2")}),r&&(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:r})]})}function c(e){let{error:t,onRetry:n,retryText:o,className:c=""}=e,{t:d}=(0,l.Z)(),u=o||d("common.retry");return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(c),children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-red-500 mb-2"}),(0,a.jsx)("p",{className:"text-red-500 mb-4 text-center",children:t}),n&&(0,a.jsxs)(s.z,{onClick:n,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"h-4 w-4"}),u]})]})}function d(e){let{title:t,description:n,icon:s,action:i,className:r=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-center ".concat(r),children:[s&&(0,a.jsx)("div",{className:"mb-4",children:s}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),n&&(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:n}),i&&(0,a.jsx)("div",{children:i})]})}},9441:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var a=n(7437),s=n(2265),i=n(3113);function r(e){let{src:t,alt:n,className:r="",fallbackSrc:l="/img/band.png",loading:o="lazy",onError:c,onLoad:d}=e,[u,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!0);return u?(0,a.jsx)("div",{className:"bg-gray-200 flex items-center justify-center ".concat(r),children:(0,a.jsx)(i.Z,{className:"h-8 w-8 text-gray-400"})}):(0,a.jsxs)("div",{className:"relative ".concat(r),children:[m&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("img",{src:t,alt:n,className:"".concat(r," ").concat(m?"opacity-0":"opacity-100"," transition-opacity duration-300"),loading:o,onError:()=>{x(!0),h(!1),null==c||c()},onLoad:()=>{h(!1),null==d||d()}})]})}},4512:function(e,t,n){"use strict";async function a(e,t){try{if("geolocation"in navigator&&"reverseGeocode"in navigator)throw Error("浏览器不支持反向地理编码");let n=await fetch("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=zh"));if(!n.ok)throw Error("地理编码服务不可用");let a=await n.json(),s=[];return a.locality&&s.push(a.locality),a.principalSubdivision&&s.push(a.principalSubdivision),a.countryName&&s.push(a.countryName),s.join("，")||"".concat(e.toFixed(4),", ").concat(t.toFixed(4))}catch(n){return"".concat(e.toFixed(4),", ").concat(t.toFixed(4))}}async function s(e){try{let t=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5};return new Promise((t,n)=>{if(!navigator.geolocation){n({code:-1,message:"浏览器不支持地理位置功能"});return}navigator.geolocation.getCurrentPosition(e=>{t({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy})},e=>{let t="获取地理位置失败";switch(e.code){case e.PERMISSION_DENIED:t="用户拒绝了地理位置请求";break;case e.POSITION_UNAVAILABLE:t="地理位置信息不可用";break;case e.TIMEOUT:t="获取地理位置超时";break;default:t="获取地理位置时发生未知错误"}n({code:e.code,message:t})},e)})}(e);return await a(t.latitude,t.longitude)}catch(e){return console.warn("获取地理位置失败，使用默认位置:",e),"中国，北京"}}async function i(){if(!navigator.permissions)return"prompt";try{return(await navigator.permissions.query({name:"geolocation"})).state}catch(e){return"prompt"}}n.d(t,{gI:function(){return i},g_:function(){return s}})},9205:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),r=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:r,className:d="",children:u,iconNode:x,...m}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:n,strokeWidth:r?24*Number(i)/Number(s):i,className:l("lucide",d),...!u&&!o(m)&&{"aria-hidden":"true"},...m},[...x.map(e=>{let[t,n]=e;return(0,a.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let n=(0,a.forwardRef)((n,i)=>{let{className:o,...c}=n;return(0,a.createElement)(d,{ref:i,iconNode:t,className:l("lucide-".concat(s(r(e))),"lucide-".concat(e),o),...c})});return n.displayName=r(e),n}},1178:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},9322:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8997:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},3113:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},3774:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7168:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4970:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(9205).Z)("square-arrow-out-up-right",[["path",{d:"M21 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6",key:"y09zxi"}],["path",{d:"m21 3-9 9",key:"mpx6sq"}],["path",{d:"M15 3h6v6",key:"1q9fwt"}]])}},function(e){e.O(0,[604,51,624,971,117,744],function(){return e(e.s=9357)}),_N_E=e.O()}]);