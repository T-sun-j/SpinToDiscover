(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{4024:function(e,t,a){Promise.resolve().then(a.bind(a,9359))},9359:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=a(7437),i=a(4196),n=a(1839),r=a(759),l=a(2690),c=a(6281),o=a(3276),d=a(8997),x=a(2451),m=a(1817),u=a(9322),h=a(3145),f=a(9376),p=a(2265),v=a(7471),j=a(6023),b=a(9116),g=a(8685);function N(){let{t:e}=(0,r.Z)(),t=(0,f.useRouter)(),{authInfo:a}=(0,c.a)(),[N,y]=(0,p.useState)([]),w=(0,p.useRef)(!1),{data:k,loading:A,error:I,execute:P,userParams:L}=(0,v.h)(async e=>await (0,j.B$)({userId:e.userId,token:e.token,page:g.ZX.DEFAULT_PAGE,limit:g.ZX.DEFAULT_LIMIT}),null);(0,p.useEffect)(()=>{L&&L.userId&&L.token&&!w.current&&(w.current=!0,P())},[null==L?void 0:L.userId,null==L?void 0:L.token,P]);let Z=e=>e&&Array.isArray(e)&&0!==e.length?e.map(e=>{var t,a;let s=e.proid||"",i=(null===(t=e.product)||void 0===t?void 0:t[0])||{},n=i.title||"",r=i.description||"",l=i.piclist||[],c=i.video||"",o=i.location||"",d=e.uid||"",x=(null===(a=e.users)||void 0===a?void 0:a[0])||{userId:d,nickname:"",avatar:""};return{id:s,title:n,description:r,images:l,video:c,location:o,collectedAt:e.createtime?new Date(1e3*e.createtime).toISOString():new Date().toISOString(),author:{userId:x.userId||d,nickname:x.nickname||"",avatar:x.avatar||""}}}):[];(0,p.useEffect)(()=>{k?k.success&&k.data?Array.isArray(k.data)?y(Z(k.data)):k.data.dataList&&Array.isArray(k.data.dataList)?y(k.data.dataList):y(Z([k.data])):Array.isArray(k)?y(Z(k)):k.dataList&&Array.isArray(k.dataList)?y(k.dataList):y(Z([k])):y([])},[k]);let E=e=>{(null==a?void 0:a.userId)&&(null==a?void 0:a.token)?t.push("/square/".concat(e,"?userId=").concat(a.userId,"&token=").concat(a.token)):t.push("/square/".concat(e))},F=t=>{let{item:a}=t;return(0,s.jsxs)("div",{className:"mb-6 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>E(a.id),children:[(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:a.images.slice(0,3).map((t,i)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.default,{src:(0,b.nJ)(t)||"/img/default-image.png",alt:"".concat(e("favoritePage.favoriteItem")," ").concat(i+1),width:112,height:112,className:"w-full h-28 object-cover rounded-md",priority:0===i}),0===i&&a.video&&(0,s.jsx)("div",{className:"absolute bottom-2 right-2 w-6 h-6 rounded-full bg-[#11295b]/80 flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"w-3 h-3 text-white"})})]},i))}),(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("h3",{className:"text-[18px] text-[#11295b] font-poppins flex-1",children:a.title}),(0,s.jsx)("button",{"aria-label":e("favoritePage.removeFromFavorites"),onClick:e=>{e.stopPropagation()},className:"ml-2 p-1 text-red-500 hover:text-red-600 transition-colors",children:(0,s.jsx)(d.Z,{className:"h-5 w-5 fill-current"})})]}),(0,s.jsx)("p",{className:"text-sm leading-6 text-[#11295b]/80 font-nunito mb-2",children:a.description}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-[#11295b]/60",children:[(0,s.jsx)("span",{className:"font-nunito",children:a.author.nickname}),(0,s.jsxs)("span",{className:"font-nunito",children:[e("favoritePage.collectedOn")," ",new Date(a.collectedAt).toLocaleDateString()]})]}),(0,s.jsx)("div",{className:"",style:{marginTop:"10px",borderBottom:"1px solid #e5e7eb"}})]})};return(0,s.jsx)(l.a,{children:(0,s.jsxs)("main",{className:"flex min-h-dvh flex-col bg-white",children:[(0,s.jsx)(i.h,{showSearch:!0,showUser:!0}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-2 z-100",children:[(0,s.jsx)("h1",{className:"text-xl font-poppins text-[#0F1728] font-semibold",children:e("favoritePage.title")}),(0,s.jsx)("button",{"aria-label":e("favoritePage.back"),onClick:()=>t.back(),className:"text-[#0F1728] hover:text-[#0F1728]",children:(0,s.jsx)(x.Z,{className:"h-7 w-7 z-10"})})]}),(0,s.jsxs)("section",{className:"px-6 pb-6 flex-1",children:[A&&(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 animate-spin text-[#11295b]"}),(0,s.jsx)("span",{className:"ml-2 text-[#11295b] font-nunito",children:e("favoritePage.loading")})]}),I&&N.length>0&&(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("span",{className:"ml-2 text-red-500 font-nunito",children:e("favoritePage.error")})]}),!A&&0===N.length&&(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,s.jsx)(d.Z,{className:"h-16 w-16 text-gray-300 mb-4"}),(0,s.jsx)("h3",{className:"text-lg  text-[#11295b] font-poppins mb-2",children:e("favoritePage.emptyTitle")}),(0,s.jsx)("p",{className:"text-[15px] text-[#11295b]/60 font-nunito max-w-sm",children:e("favoritePage.emptyDescription")})]}),{}),!A&&!I&&N.length>0&&(0,s.jsx)(s.Fragment,{children:N.map((e,t)=>(0,s.jsx)("div",{children:(0,s.jsx)(F,{item:e})},e.id))})]}),(0,s.jsx)(n.$,{})]})})}},8997:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])}},function(e){e.O(0,[604,51,624,673,971,117,744],function(){return e(e.s=4024)}),_N_E=e.O()}]);