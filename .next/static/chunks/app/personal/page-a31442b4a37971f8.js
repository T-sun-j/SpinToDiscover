(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[617],{3408:function(e,t,n){Promise.resolve().then(n.bind(n,310))},310:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(9376),u=n(2265),r=n(6281);function l(){let e=(0,o.useRouter)(),{authInfo:t}=(0,r.a)();return(0,u.useEffect)(()=>{(null==t?void 0:t.userId)&&e.replace("/personal/".concat(t.userId))},[null==t?void 0:t.userId,e]),null}},6281:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return c},a:function(){return f},z:function(){return h}});var o=n(7437),u=n(2265),r=n(9376);let l=(0,u.createContext)(void 0),i="auth_info",a="auth_info";function s(e){try{if(e){let t=JSON.stringify(e);localStorage.setItem(i,t),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,o=new Date;o.setTime(o.getTime()+864e5*n),document.cookie="".concat(e,"=").concat(t,";expires=").concat(o.toUTCString(),";path=/;SameSite=Lax")}(a,t,30)}else localStorage.removeItem(i),document.cookie="".concat(a,"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;")}catch(e){console.error("Error storing auth info:",e)}}function c(e){let{children:t}=e,[n,c]=(0,u.useState)(null),f=(0,r.useSearchParams)();(0,u.useEffect)(()=>{console.log("AuthContext: Initializing auth state...");let e=f.get("userId"),t=f.get("token"),n=f.get("email");if(e&&t&&n){console.log("AuthContext: Found auth info in URL parameters");let o={userId:e,token:t,email:n};c(o),s(o)}else{console.log("AuthContext: Checking local storage for auth info...");let e=function(){try{let e=localStorage.getItem(i);if(e)return JSON.parse(e);let t=function(e){let t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let o=n[e];for(;" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}(a);if(t)return JSON.parse(t);return null}catch(e){return console.error("Error reading stored auth info:",e),null}}();e?(console.log("AuthContext: Found stored auth info:",{userId:e.userId,hasToken:!!e.token,email:e.email}),c(e)):console.log("AuthContext: No stored auth info found")}},[f]);let h=!!((null==n?void 0:n.userId)&&(null==n?void 0:n.token)&&(null==n?void 0:n.email));return(0,o.jsx)(l.Provider,{value:{authInfo:n,isAuthenticated:h,setAuthInfo:e=>{c(e),s(e)},clearAuthInfo:()=>{c(null),s(null)},getUserId:()=>(null==n?void 0:n.userId)||null,getToken:()=>(null==n?void 0:n.token)||null,getEmail:()=>(null==n?void 0:n.email)||null},children:t})}function f(){let e=(0,u.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function h(){let{authInfo:e,isAuthenticated:t}=f();return{userParams:e?{userId:e.userId,token:e.token,email:e.email}:null,isAuthenticated:t}}},9376:function(e,t,n){"use strict";var o=n(5475);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(t,{useSearchParams:function(){return o.useSearchParams}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3408)}),_N_E=e.O()}]);