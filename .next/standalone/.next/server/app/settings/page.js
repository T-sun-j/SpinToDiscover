(()=>{var e={};e.id=938,e.ids=[938],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4565:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),t(7322),t(3169),t(5866);var r=t(3191),a=t(8716),n=t(7922),i=t.n(n),l=t(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let c=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7322)),"/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3169)),"/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/settings/page.tsx"],u="/settings/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5154:(e,s,t)=>{Promise.resolve().then(t.bind(t,942))},942:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(326),a=t(772),n=t(1890),i=t(5932),l=t(9015),o=t(1405),c=t(3211),d=t(6968),u=t(6370),p=t(7577),x=t(5047),m=t(3136),h=t(2991);function g(){let{t:e}=(0,c.Z)(),s=(0,x.useRouter)(),{authInfo:t,getEmail:g,getUserId:f,getToken:y}=(0,m.a)(),[j,v]=(0,p.useState)({email:"",password:"",confirmPassword:""}),[w,b]=(0,p.useState)(""),[N,k]=(0,p.useState)(""),[P,Z]=(0,p.useState)(!1),S=async t=>{if(t.preventDefault(),Z(!0),b(""),k(""),j.password!==j.confirmPassword){b(e("auth.passwordsNotMatch")),Z(!1);return}if(j.password.length<6){b(e("settings.passwordTooShort")),Z(!1);return}let r=f(),a=y(),n=g();if(!r||!a||!n){b(e("settings.authError")),Z(!1);return}try{console.log("Reset password attempt for:",{email:n,userId:r,token:"***"});let t=await (0,h.c0)(n,j.password,r,a);console.log("Reset password response:",t),t.success?(k(e("settings.resetSuccess")),v(e=>({...e,password:"",confirmPassword:""})),setTimeout(()=>{s.push("/personal-center")},3e3)):b(t.message||t.error||e("settings.resetError"))}catch(s){console.error("Reset password error:",s),b(s instanceof Error?s.message:e("settings.resetError"))}finally{Z(!1)}};return r.jsx(u.a,{children:(0,r.jsxs)("main",{className:"flex min-h-dvh flex-col bg-white",children:[r.jsx(d.h,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 z-100",children:[r.jsx("h1",{className:"text-xl font-poppins text-[#0F1728] font-semibold",children:e("settings.setupTitle")}),r.jsx("button",{className:"text-[#0F1728] hover:text-[#0F1728]",onClick:()=>{s.back()},children:r.jsx(n.Z,{className:"h-7 w-7 z-10"})})]}),(0,r.jsxs)("form",{onSubmit:S,className:"flex-1 space-y-6 px-6",children:[r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"email",value:j.email,placeholder:e("settings.currentEmail"),className:"w-full rounded-full bg-gray-100 px-10 py-3 text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/60 cursor-not-allowed",readOnly:!0,disabled:!0})]})}),r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"password",value:j.password,onChange:e=>v({...j,password:e.target.value}),placeholder:e("settings.newPassword"),className:"w-full rounded-full bg-gray-100 px-10 py-3 text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/60",required:!0})]})}),r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"password",value:j.confirmPassword,onChange:e=>v({...j,confirmPassword:e.target.value}),placeholder:e("settings.confirmPassword"),className:"w-full rounded-full bg-gray-100 px-10 py-3 text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/60",required:!0})]})}),w&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-red-500 text-sm font-inter",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{children:w})]}),N&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-500 text-sm font-inter",children:[r.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),r.jsx("span",{children:N})]}),r.jsx(a.z,{type:"submit",className:"w-full bg-[#11295b] text-white shadow-md rounded-lg font-nunito font-bold",size:"lg",disabled:P,children:P?e("settings.submitting"):e("settings.submit")})]})]})})}},6370:(e,s,t)=>{"use strict";t.d(s,{a:()=>d});var r=t(326),a=t(7577),n=t(5047),i=t(3136),l=t(3211),o=t(7402);let c=["/","/square","/login","/register","/forgot-password","/change-password","/personalization","/about","/privacy"];function d({children:e,fallback:s}){let{isAuthenticated:t,authInfo:d}=(0,i.a)(),{t:u}=(0,l.Z)();(0,n.useRouter)();let p=(0,n.usePathname)(),[x,m]=(0,a.useState)(!1);return c.some(e=>"/"===e?"/"===p:p.startsWith(e))?r.jsx(r.Fragment,{children:e}):t&&d?.userId&&d?.token?r.jsx(r.Fragment,{children:e}):s||r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx("div",{className:"text-center",children:r.jsx(o.TK,{size:"lg",text:u("common.verifying")})})})}},7402:(e,s,t)=>{"use strict";t.d(s,{TK:()=>o,Te:()=>c,ub:()=>d});var r=t(326),a=t(772),n=t(1291),i=t(1405),l=t(3211);function o({size:e="md",text:s,className:t=""}){let{t:a}=(0,l.Z)(),n=s||a("common.loading");return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center ${t}`,children:[r.jsx("div",{className:`animate-spin rounded-full border-b-2 border-[#11295b] ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]} mb-2`}),n&&r.jsx("p",{className:"text-gray-500 text-sm",children:n})]})}function c({error:e,onRetry:s,retryText:t,className:o=""}){let{t:c}=(0,l.Z)(),d=t||c("common.retry");return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center ${o}`,children:[r.jsx(n.Z,{className:"h-8 w-8 text-red-500 mb-2"}),r.jsx("p",{className:"text-red-500 mb-4 text-center",children:e}),s&&(0,r.jsxs)(a.z,{onClick:s,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(i.Z,{className:"h-4 w-4"}),d]})]})}function d({title:e,description:s,icon:t,action:a,className:n=""}){return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center text-center ${n}`,children:[t&&r.jsx("div",{className:"mb-4",children:t}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),s&&r.jsx("p",{className:"text-gray-500 mb-4",children:s}),a&&r.jsx("div",{children:a})]})}},1890:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1291:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9015:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},5932:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},1405:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(2881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7322:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/settings/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[898,728,591,951],()=>t(4565));module.exports=r})();