"use strict";exports.id=951,exports.ids=[951],exports.modules={6968:(e,t,r)=>{r.d(t,{h:()=>u});var o=r(326),s=r(772),a=r(434),n=r(6226),i=r(5047),c=r(3136);function u({showSearch:e=!1,showUser:t=!1,className:r="",transparent:u=!1,logoLink:l="/",userLink:d="/login"}){let h=(0,i.useRouter)(),{authInfo:g}=(0,c.a)();return(0,o.jsxs)("header",{className:`flex items-center justify-between pt-3 px-1 w-full  ${r}`,children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsx(a.default,{href:l,className:"flex items-center gap-2 ml-2",children:o.jsx(n.default,{src:u?"/img/logo-new-w.png":"/img/logo-new-d.png",alt:"logo",width:52,height:22,priority:!0,className:"h-14 w-auto"})})}),(0,o.jsxs)("div",{className:"flex items-center",children:[o.jsx(n.default,{src:"/img/bg.png",alt:"bg",width:16,height:16,className:"h-[14.5%] w-auto fixed top-0 right-0"}),e?o.jsx(a.default,{href:"/search","aria-label":"search",children:o.jsx(s.z,{variant:"ghost",size:"icon",className:"text-foreground",children:o.jsx(n.default,{src:"/img/search.png",alt:"search",width:28,height:28,className:"h-7 w-7 z-10"})})}):null,t?o.jsx(s.z,{variant:"ghost",size:"icon",className:"text-foreground",onClick:()=>{g?.token&&g?.userId?h.push("/personal-center"):h.push("/login")},"aria-label":"account",children:o.jsx(n.default,{src:u?"/img/user.png":"/img/user-d.png",alt:"search",width:28,height:28,className:"h-8 w-8 z-10"})}):null]})]})}},772:(e,t,r)=>{r.d(t,{d:()=>c,z:()=>u});var o=r(326),s=r(7577),a=r(4214),n=r(9360),i=r(7863);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50 btn-ring",{variants:{variant:{default:"bg-primary text-primary-foreground hover:opacity-90",outline:"border bg-transparent hover:bg-secondary/40",ghost:"hover:bg-secondary/50",gradient:"btn-gradient text-white"},size:{default:"h-11 px-5",sm:"h-9 px-4 text-xs",lg:"h-12 px-6 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...n},u)=>{let l=s?a.g7:"button";return o.jsx(l,{ref:u,className:(0,i.cn)(c({variant:t,size:r}),e),...n})});u.displayName="Button"},6824:(e,t,r)=>{r.d(t,{Hz:()=>a,bl:()=>o,nJ:()=>s});let o={BASE_URL:"https://std.spinlinx.com",STATIC_URL:"https://std.spinlinx.com"},s=(e,t="/img/avatar.png")=>{if(!e||""===e.trim())return t;if(e.startsWith("http"))try{return new URL(e),e}catch{return t}let r=`${o.STATIC_URL}${e}`;try{return new URL(r),r}catch{return t}},a={BASE_URL:`${o.BASE_URL}/homeapi.php`,UPLOAD_URL:`${o.BASE_URL}/upimg.php`,TIMEOUT:1e4,DEFAULT_HEADERS:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},ENDPOINTS:{REGISTER:"register",LOGIN:"login",UPLOAD_IMG:"uploadimg"}}},2991:(e,t,r)=>{r.d(t,{$x:()=>k,B$:()=>b,I:()=>h,Ir:()=>L,NG:()=>v,SX:()=>m,V4:()=>y,Yt:()=>l,_Z:()=>I,a$:()=>a,aw:()=>A,bG:()=>u,c0:()=>c,gF:()=>i,gQ:()=>E,gS:()=>d,gg:()=>$,h5:()=>g,jX:()=>T,mG:()=>f,pH:()=>n,u9:()=>N,v1:()=>p,w:()=>w,wo:()=>x});var o=r(7483),s=r(6824);async function a(e){try{return await (0,o.WY)("register",{email:e.email,password:e.password,language:e.language,acceptTerms:e.acceptTerms,location:e.location})}catch(e){if(e instanceof o.Lu)throw Error(`注册失败: ${e.message}`);throw Error("注册过程中发生未知错误")}}async function n(e,t,r="en"){try{return await (0,o.WY)("login",{email:e,password:t,language:r})}catch(e){if(e instanceof o.Lu)throw Error(`登录失败: ${e.message}`);throw Error("登录过程中发生未知错误")}}async function i(e){try{return await (0,o.WY)("forgot-password",{email:e})}catch(e){if(e instanceof o.Lu)throw Error(`发送重置邮件失败: ${e.message}`);throw Error("发送重置邮件过程中发生未知错误")}}async function c(e,t,r,s){try{return await (0,o.WY)("reset-password",{email:e,newPassword:t,userId:r,token:s})}catch(e){if(e instanceof o.Lu)throw Error(`重置密码失败: ${e.message}`);throw Error("重置密码过程中发生未知错误")}}async function u(e){try{return await (0,o.WY)("getuserinfo",{email:e.email,userId:e.userId,token:e.token})}catch(e){if(e instanceof o.Lu)throw Error(`获取用户信息失败: ${e.message}`);throw Error("获取用户信息过程中发生未知错误")}}async function l(e){try{return await (0,o.WY)("getothersmassage",{userId:e.userId,token:e.token,otherId:e.otherId})}catch(e){if(e instanceof o.Lu)throw Error(`获取其他用户信息失败: ${e.message}`);throw Error("获取其他用户信息过程中发生未知错误")}}async function d(e,t,r,s,a,n="en"){try{return await (0,o.WY)("userprofile",{email:e,userId:t,token:r,nickname:s,avatar:a||"",language:n})}catch(e){if(e instanceof o.Lu)throw Error(`更新用户信息失败: ${e.message}`);throw Error("更新用户信息过程中发生未知错误")}}async function h(e){try{return await (0,o.WY)("updateuserbrand",{email:e.email,userId:e.userId,token:e.token,brand:e.brand||"",brief:e.brief||"",logo:e.logo||"",officialsite:e.officialsite||"",tel:e.tel||"",address:e.address||"",location:e.location||"",workHour:e.workHour||"",shopurl:e.shopurl||""})}catch(e){if(e instanceof o.Lu)throw Error(`更新品牌信息失败: ${e.message}`);throw Error("更新品牌信息过程中发生未知错误")}}async function g(e){try{return await (0,o.WY)("postsquare",{userId:e.userId,token:e.token,title:e.title,description:e.description,location:e.location,images:e.images||"",video:e.video||"",website:e.website||"",logo:e.logo||"",intro:e.intro||"",operatingHours:e.operatingHours||"",customerService:e.customerService||"",workingHours:e.workingHours||""})}catch(e){if(e instanceof o.Lu)throw Error(`发布广场内容失败: ${e.message}`);throw Error("发布广场内容过程中发生未知错误")}}async function m(e){try{let t={tab:e.tab||"",page:e.page||1,limit:e.limit||10,location:e.location};return e.userId&&e.token&&(t.userId=e.userId,t.token=e.token),await (0,o.WY)("gethomelist",t)}catch(e){if(e instanceof o.Lu)throw Error(`获取广场内容列表失败: ${e.message}`);throw Error("获取广场内容列表过程中发生未知错误")}}async function f(e){try{let t=await (0,o.WY)("getdetail",{userId:e.userId,token:e.token,postId:e.postId});return t.success&&t.data&&(Array.isArray(t.comments)?t.data.comments=t.comments:Array.isArray(t.data.comments)||(t.data.comments=[])),t}catch(e){if(e instanceof o.Lu)throw Error(`获取广场内容详情失败: ${e.message}`);throw Error("获取广场内容详情过程中发生未知错误")}}async function w(e){try{return await (0,o.WY)("postcomments",{userId:e.userId,token:e.token,productId:e.productId,parentId:e.parentId||"",content:e.content})}catch(e){if(e instanceof o.Lu)throw Error(`发表评论失败: ${e.message}`);throw Error("发表评论过程中发生未知错误")}}async function p(e){try{return await (0,o.WY)("loveinformation",{userId:e.userId,token:e.token,productId:e.productId,isLove:e.isLove})}catch(e){if(e instanceof o.Lu)throw Error(`点赞操作失败: ${e.message}`);throw Error("点赞操作过程中发生未知错误")}}async function E(e){try{return await (0,o.WY)("collectinformation",{userId:e.userId,token:e.token,productId:e.productId,isCollect:e.isCollect})}catch(e){if(e instanceof o.Lu)throw Error(`收藏操作失败: ${e.message}`);throw Error("收藏操作过程中发生未知错误")}}async function y(e){try{return await (0,o.WY)("collectuser",{userId:e.userId,token:e.token,authorId:e.authorId,isCollect:e.isCollect})}catch(e){if(e instanceof o.Lu)throw Error(`关注操作失败: ${e.message}`);throw Error("关注操作过程中发生未知错误")}}async function I(e){try{return await (0,o.WY)("shareinformation",{userId:e.userId,token:e.token,productId:e.productId})}catch(e){if(e instanceof o.Lu)throw Error(`分享操作失败: ${e.message}`);throw Error("分享操作过程中发生未知错误")}}async function $(e){try{let t;if(e.size>10485760)throw Error(`图片文件过大，请选择小于10MB的文件。当前文件大小: ${(e.size/1024/1024).toFixed(2)}MB`);console.log(`Image file size: ${(e.size/1024/1024).toFixed(2)}MB`),console.log(`Image file type: ${e.type}`);let r=await new Promise((t,r)=>{let o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=()=>r(Error("文件读取失败")),o.readAsDataURL(e)}),a=`${s.Hz.UPLOAD_URL}?action=uploadimg`;console.log(`Image upload URL: ${a}`),console.log(`Base64 data length: ${r.length}`);let n=new FormData;n.append("avatar",r);let i=new AbortController,c=setTimeout(()=>i.abort(),6e4),u=await fetch(a,{method:"POST",body:n,signal:i.signal});if(clearTimeout(c),!u.ok)throw new o.Lu(`HTTP Error: ${u.status} ${u.statusText}`,u.status);let l=await u.text();if(console.log(`Image upload response status: ${u.status}`),console.log(`Image upload response text: ${l}`),!l.trim())throw new o.Lu("Empty response from image upload server",u.status);try{t=JSON.parse(l),console.log("Successfully parsed image upload JSON response:",t)}catch(e){console.log("Failed to parse JSON, treating as text response"),t={img:l.trim()}}if(t.error||void 0!==t.code&&0!==t.code||!1===t.success)throw new o.Lu(t.message||t.error||"Image upload failed",u.status,t.code);return{success:!0,data:t.data||t,message:t.message,code:t.code}}catch(e){if(console.error("Image upload error:",e),e instanceof o.Lu)throw Error(`图片上传失败: ${e.message}`);throw Error("图片上传过程中发生未知错误")}}async function k(e){try{let t;if(e.size>209715200)throw Error(`视频文件过大，请选择小于200MB的文件。当前文件大小: ${(e.size/1024/1024).toFixed(2)}MB`);console.log(`Video file size: ${(e.size/1024/1024).toFixed(2)}MB`),console.log(`Video file type: ${e.type}`);let r=s.Hz.UPLOAD_URL.replace("/upimg.php","/videoyasuo.php"),a=`${r}?action=pushvideo`;console.log(`Video upload URL: ${a}`);let n=new FormData;n.append("video",e);let i=new AbortController,c=setTimeout(()=>i.abort(),3e5),u=await fetch(a,{method:"POST",body:n,signal:i.signal});if(clearTimeout(c),!u.ok)throw new o.Lu(`HTTP Error: ${u.status} ${u.statusText}`,u.status);let l=await u.text();if(console.log(`Video upload response status: ${u.status}`),console.log(`Video upload response text length: ${l.length}`),console.log(`Video upload response text: ${l}`),!l.trim())return console.log("Empty response from video upload server, treating as success"),{success:!0,data:{url:"upload_success",code:0,msg:"ok"},message:"Video uploaded successfully",code:0};try{t=JSON.parse(l),console.log("Successfully parsed video upload JSON response:",t)}catch(e){console.log("Failed to parse JSON, treating as text response"),t={img:l.trim()}}if(t.error||void 0!==t.code&&0!==t.code||!1===t.success)throw new o.Lu(t.message||t.error||"Video upload failed",u.status,t.code);return{success:!0,data:t.data||t,message:t.message,code:t.code}}catch(e){if(e instanceof o.Lu)throw Error(`视频上传失败: ${e.message}`);throw Error("视频上传过程中发生未知错误")}}async function L(e){try{return await (0,o.WY)("collectuserlist",{userId:e.userId,token:e.token})}catch(e){if(e instanceof o.Lu)throw Error(`获取关注列表失败: ${e.message}`);throw Error("获取关注列表过程中发生未知错误")}}async function x(e){try{return await (0,o.WY)("collectmylist",{userId:e.userId,token:e.token})}catch(e){if(e instanceof o.Lu)throw Error(`获取粉丝列表失败: ${e.message}`);throw Error("获取粉丝列表过程中发生未知错误")}}async function v(e){try{return await (0,o.WY)("getbrowsinglist",{userId:e.userId,token:e.token,page:e.page||1,limit:e.limit||10})}catch(e){if(e instanceof o.Lu)throw Error(`获取浏览记录失败: ${e.message}`);throw Error("获取浏览记录过程中发生未知错误")}}async function b(e){try{return await (0,o.WY)("getcollectlist",{userId:e.userId,token:e.token,page:e.page||1,limit:e.limit||10})}catch(e){if(e instanceof o.Lu)throw Error(`获取收藏列表失败: ${e.message}`);throw Error("获取收藏列表过程中发生未知错误")}}async function T(e){try{return await (0,o.WY)("userArticleDel",{userId:e.userId,token:e.token,id:e.id})}catch(e){if(e instanceof o.Lu)throw Error(`删除作品失败: ${e.message}`);throw Error("删除作品过程中发生未知错误")}}async function A(e){try{return await (0,o.WY)("userArticleHide",{userId:e.userId,token:e.token,id:e.id,status:e.status})}catch(e){if(e instanceof o.Lu)throw Error(`隐藏作品失败: ${e.message}`);throw Error("隐藏作品过程中发生未知错误")}}async function N(e){try{let t=await (0,o.WY)("queryall",{userId:e.userId,token:e.token,typeid:e.typeid,title:e.title});if(console.log("Search API response:",t),!t.success&&t.message?.includes("token失效"))throw Error("TOKEN_EXPIRED");return t}catch(e){if(console.error("Search API error:",e),e instanceof o.Lu){if(e.message.includes("token失效")||e.message.includes("TOKEN_EXPIRED"))throw Error("TOKEN_EXPIRED");throw Error(`搜索失败: ${e.message}`)}throw Error("搜索过程中发生未知错误")}}},7483:(e,t,r)=>{r.d(t,{Lu:()=>a,WY:()=>n});var o=r(6824);function s(e){(401===e.status||401===e.code||e.message?.includes("token")||e.message?.includes("unauthorized")||e.message?.includes("authentication")||e.message?.includes("Token")||e.message?.includes("Unauthorized"))&&console.log("Authentication error detected:",e)}class a extends Error{constructor(e,t,r){super(e),this.status=t,this.code=r,this.name="RequestError"}}async function n(e,t={},r={}){try{let n="gethomelist"===e&&"recommend"===t.tab;if(["getuserinfo","postsquare","gethomelist","postcomments","loveinformation","collectinformation","collectuser","userprofile"].includes(e)&&!n)throw s({status:401,message:"No valid authentication token"}),new a("Authentication required",401);let i=function(e){let t=new URLSearchParams;return Object.entries(e).forEach(([e,r])=>{null!=r&&t.append(e,String(r))}),t.toString()}({action:e,...t}),c=`${o.Hz.BASE_URL}?${i}`,u={method:"GET",headers:{...o.Hz.DEFAULT_HEADERS,...r.headers},...r},l=new AbortController,d=setTimeout(()=>l.abort(),o.Hz.TIMEOUT),h=await fetch(c,{...u,signal:l.signal});if(clearTimeout(d),!h.ok)throw new a(`HTTP Error: ${h.status} ${h.statusText}`,h.status);let g=await h.json();if(g.error||void 0!==g.code&&0!==g.code||!1===g.success)throw new a(g.message||g.error||"Unknown error",h.status,g.code);return g}catch(t){if(t instanceof a)throw s(t),t;if(t instanceof Error){if("AbortError"===t.name)throw new a("Request timeout",408);let e=new a(t.message,0);throw s(e),e}let e=new a("Unknown error occurred",0);throw s(e),e}}},7863:(e,t,r)=>{r.d(t,{cn:()=>a});var o=r(1009),s=r(1135);function a(...e){return(0,o.m6)((0,s.Z)(e))}},2881:(e,t,r)=>{r.d(t,{Z:()=>d});var o=r(7577);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:n,iconNode:l,...d},h)=>(0,o.createElement)("svg",{ref:h,...u,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:i("lucide",a),...!n&&!c(d)&&{"aria-hidden":"true"},...d},[...l.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(n)?n:[n]])),d=(e,t)=>{let r=(0,o.forwardRef)(({className:r,...a},c)=>(0,o.createElement)(l,{ref:c,iconNode:t,className:i(`lucide-${s(n(e))}`,`lucide-${e}`,r),...a}));return r.displayName=n(e),r}}};