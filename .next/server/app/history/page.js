(()=>{var e={};e.id=811,e.ids=[811],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3061:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(926),s(3169),s(5866);var r=s(3191),n=s(8716),a=s(7922),i=s.n(a),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,926)),"/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/history/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3169)),"/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/history/page.tsx"],x="/history/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/history/page",pathname:"/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7348:(e,t,s)=>{Promise.resolve().then(s.bind(s,3103))},3103:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(326),n=s(6679),a=s(6219),i=s(3211),l=s(6370),o=s(4893),c=s(1890),d=s(7506),x=s(1291);let m=(0,s(2881).Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var u=s(6226),h=s(5047),p=s(7577),f=s(8200),g=s(2991),j=s(6824),y=s(6260);function N(){let{t:e}=(0,i.Z)(),t=(0,h.useRouter)(),[s,N]=(0,p.useState)([]);(0,p.useRef)(!1);let{data:v,loading:b,error:_,execute:w,userParams:I}=(0,f.h)(async e=>await (0,g.NG)({userId:e.userId,token:e.token,page:y.ZX.DEFAULT_PAGE,limit:y.ZX.DEFAULT_LIMIT}),null),T=({item:t})=>(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[t.images.slice(0,3).map((e,s)=>(0,r.jsxs)("div",{className:"relative",children:[r.jsx(u.default,{src:(0,j.nJ)(e)||"/img/default-image.png",alt:`history-${s+1}`,width:112,height:112,className:"w-full h-28 object-cover rounded-md",priority:0===s}),0===s&&t.video&&r.jsx("div",{className:"absolute bottom-2 right-2 w-6 h-6 rounded-full bg-[#11295b]/80 flex items-center justify-center",children:r.jsx(o.Z,{className:"w-3 h-3 text-white"})})]},s)),t.images.length<3&&Array.from({length:3-t.images.length}).map((t,s)=>r.jsx("div",{className:"w-full h-28 bg-gray-100 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-gray-400 text-xs",children:e("history.noImage")})},`placeholder-${s}`))]}),r.jsx("h3",{className:"text-[18px] font-semibold text-[#11295b] font-poppins mb-2",children:t.title}),r.jsx("p",{className:"text-sm leading-6 text-[#11295b]/80 font-nunito mb-2",children:t.description}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-[#11295b]/60",children:[r.jsx("span",{className:"font-nunito",children:t.location}),(0,r.jsxs)("span",{className:"font-nunito",children:[e("history.viewedOn")," ",new Date(t.viewedAt).toLocaleDateString()]})]})]});return r.jsx(l.a,{children:(0,r.jsxs)("main",{className:"flex min-h-dvh flex-col bg-white",children:[r.jsx(n.h,{showLanguage:!0,showSearch:!0,showUser:!0}),(0,r.jsxs)("div",{className:"flex justify-between items-center px-6 py-2",children:[r.jsx("h1",{className:"text-xl text-[#11295b] font-poppins",children:e("personalCenter.menu.history")}),r.jsx("button",{"aria-label":e("history.back"),onClick:()=>t.back(),className:"text-[#11295b] hover:text-[#11295b]",children:r.jsx(c.Z,{className:"w-7 h-7"})})]}),(0,r.jsxs)("section",{className:"px-6 pb-6",children:[b&&(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx(d.Z,{className:"w-5 h-5 animate-spin text-[#11295b]"}),r.jsx("span",{className:"ml-2 text-[#11295b] font-nunito",children:e("history.loading")})]}),_&&s.length>0&&(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[r.jsx(x.Z,{className:"w-5 h-5 text-red-500"}),r.jsx("span",{className:"ml-2 text-red-500 font-nunito",children:e("history.error")})]}),!b&&0===s.length&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(m,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-[#11295b] font-nunito mb-2",children:e("history.noHistory")}),r.jsx("p",{className:"text-[#11295b]/60 font-inter text-center",children:e("history.noHistoryDescription")})]}),!b&&!_&&s.length>0&&r.jsx(r.Fragment,{children:s.map((e,t)=>(0,r.jsxs)("div",{children:[r.jsx(T,{item:e}),t<s.length-1&&r.jsx("div",{className:"border-t border-gray-200 my-4"})]},e.id))})]}),r.jsx(a.$,{})]})})}},6370:(e,t,s)=>{"use strict";s.d(t,{a:()=>d});var r=s(326),n=s(7577),a=s(5047),i=s(3136),l=s(3211),o=s(7402);let c=["/","/square","/login","/register","/forgot-password","/change-password","/personalization","/about","/privacy"];function d({children:e,fallback:t}){let{isAuthenticated:s,authInfo:d}=(0,i.a)(),{t:x}=(0,l.Z)();(0,a.useRouter)();let m=(0,a.usePathname)(),[u,h]=(0,n.useState)(!1);return c.some(e=>"/"===e?"/"===m:m.startsWith(e))?r.jsx(r.Fragment,{children:e}):s&&d?.userId&&d?.token?r.jsx(r.Fragment,{children:e}):t||r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:r.jsx("div",{className:"text-center",children:r.jsx(o.TK,{size:"lg",text:x("common.verifying")})})})}},6219:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(326),n=s(3211),a=s(772),i=s(7863);function l(){let{language:e,setLanguage:t,t:s}=(0,n.Z)();return(0,r.jsxs)("div",{className:"flex items-center gap-2 mr-1",children:[r.jsx(a.z,{variant:"ghost",size:"sm",className:(0,i.cn)("text-[11px] px-0 py-1 h-auto font-inter","text-muted-foreground"),children:s("footer.language.en")}),r.jsx(a.z,{variant:"ghost",size:"sm",className:(0,i.cn)("text-[11px] px-0 py-1 h-auto font-inter","text-muted-foreground"),children:s("footer.language.zh")})]})}var o=s(434);function c(){let{t:e}=(0,n.Z)();return r.jsx("footer",{className:"mt-auto text-[11px] text-muted-foreground py-2 px-2 w-full font-inter",children:(0,r.jsxs)("div",{className:"flex justify-between items-center w-full",children:[r.jsx("div",{className:"flex items-center gap-2 font-inter",children:r.jsx(l,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[r.jsx(o.default,{href:"/about",className:"text-muted-foreground font-inter",children:e("footer.links.about")}),r.jsx(o.default,{href:"/privacy",className:"text-muted-foreground font-inter",children:e("footer.links.privacy")}),r.jsx("span",{className:"text-muted-foreground font-inter",children:e("footer.copyright")})]})]})})}},7402:(e,t,s)=>{"use strict";s.d(t,{TK:()=>o,Te:()=>c,ub:()=>d});var r=s(326),n=s(772),a=s(1291),i=s(1405),l=s(3211);function o({size:e="md",text:t,className:s=""}){let{t:n}=(0,l.Z)(),a=t||n("common.loading");return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center ${s}`,children:[r.jsx("div",{className:`animate-spin rounded-full border-b-2 border-[#11295b] ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]} mb-2`}),a&&r.jsx("p",{className:"text-gray-500 text-sm",children:a})]})}function c({error:e,onRetry:t,retryText:s,className:o=""}){let{t:c}=(0,l.Z)(),d=s||c("common.retry");return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center ${o}`,children:[r.jsx(a.Z,{className:"h-8 w-8 text-red-500 mb-2"}),r.jsx("p",{className:"text-red-500 mb-4 text-center",children:e}),t&&(0,r.jsxs)(n.z,{onClick:t,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[r.jsx(i.Z,{className:"h-4 w-4"}),d]})]})}function d({title:e,description:t,icon:s,action:n,className:a=""}){return(0,r.jsxs)("div",{className:`flex flex-col items-center justify-center text-center ${a}`,children:[s&&r.jsx("div",{className:"mb-4",children:s}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),t&&r.jsx("p",{className:"text-gray-500 mb-4",children:t}),n&&r.jsx("div",{children:n})]})}},6260:(e,t,s)=>{"use strict";s.d(t,{$w:()=>i,ZX:()=>r,iK:()=>a,vR:()=>n});let r={DEFAULT_PAGE:1,DEFAULT_LIMIT:999,MAX_LIMIT:100,REQUEST_TIMEOUT:1e4,MAX_RETRIES:3},n={COLORS:{PRIMARY:"#11295b",PRIMARY_OPACITY_80:"#11295b/80",PRIMARY_OPACITY_60:"#11295b/60",GRAY_100:"bg-gray-100",GRAY_400:"text-gray-400",RED_500:"text-red-500",WHITE:"text-white"},FONTS:{POPPINS:"font-poppins",NUNITO:"font-nunito",INTER:"font-inter"},FONT_WEIGHTS:{SEMIBOLD:"font-semibold",NORMAL:"font-normal"},SIZES:{ICON_SM:"h-3.5 w-3.5",ICON_MD:"h-6 w-6",ICON_LG:"h-7 w-7",ICON_XL:"h-8 w-8"},SPACING:{GAP_2:"gap-2",GAP_4:"gap-4",MB_2:"mb-2",MB_4:"mb-4",MB_6:"mb-6",MY_4:"my-4",PX_6:"px-6",PY_2:"py-2",PY_8:"py-8",PY_12:"py-12",PB_6:"pb-6"},BORDER_RADIUS:{ROUNDED_MD:"rounded-md",ROUNDED_FULL:"rounded-full"},EFFECTS:{OPACITY_50:"opacity-50",OPACITY_80:"/80",OPACITY_60:"/60"}},a={IMAGES:{MAX_THUMBNAILS:3,DEFAULT_IMAGE:"/img/band.png",THUMBNAIL_SIZE:{width:360,height:220},THUMBNAIL_CLASS:"w-full h-28 object-cover rounded-md"},LAYOUT:{GRID_COLS_3:"grid-cols-3",MIN_HEIGHT_DVH:"min-h-dvh",FLEX_COL:"flex-col",FLEX_CENTER:"flex items-center justify-center",FLEX_BETWEEN:"flex items-center justify-between"},TEXT_SIZES:{TITLE:"text-2xl",SUBTITLE:"text-lg",BODY:"text-[15px]",SMALL:"text-sm",XS:"text-xs"}},i={SPIN:"animate-spin",FADE_IN:"animate-fade-in",SLIDE_UP:"animate-slide-up"}},8200:(e,t,s)=>{"use strict";s.d(t,{h:()=>i});var r=s(7577),n=s(5047),a=s(3136);function i(e,t){let[s,i]=(0,r.useState)({data:null,loading:!1,error:null,success:!1}),l=(0,n.useSearchParams)(),{userParams:o}=(0,a.z)(),c=(0,r.useCallback)(()=>{if(o)return o;let e=l.get("userId"),t=l.get("token"),s=l.get("email");return e&&t?{userId:e,token:t,email:s||void 0}:null},[l,o]),d=(0,r.useCallback)(async s=>{let r=s||c();if(!r){t&&i({data:t,loading:!1,error:null,success:!0});return}i(e=>({...e,loading:!0,error:null}));try{let t=await e(r);i({data:t,loading:!1,error:null,success:!0})}catch(e){i({data:t||null,loading:!1,error:e instanceof Error?e.message:"请求失败",success:!1})}},[e,c,t]),x=(0,r.useCallback)(()=>{i({data:null,loading:!1,error:null,success:!1})},[]);return{...s,execute:d,reset:x,userParams:c()}}},1890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1291:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4893:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},1405:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},926:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/jinjing/Desktop/jj/code1/SpinToDiscover/SpinToDiscover/app/history/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[845,608,203,555],()=>s(3061));module.exports=r})();